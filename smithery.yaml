runtime: python
version: 3.1.0
description: "Supabase MCP OAuth2 Server - Python Pure"

build:
  command: "pip install -r requirements.txt"
  output: "dist"

server:
  command: "python src/supabase_server.py"
  port: 3000

# Configuration Docker personnalis√©e
docker:
  use_custom_dockerfile: true
  dockerfile: "Dockerfile"

# Variables d'environnement requises
env:
  SUPABASE_URL:
    description: "Your self-hosted Supabase URL"
    required: true
  SUPABASE_ANON_KEY:
    description: "Supabase anonymous key"
    required: true
  SUPABASE_SERVICE_ROLE_KEY:
    description: "Service role key for admin operations"
    required: false
  DATABASE_URL:
    description: "Direct PostgreSQL connection for advanced features"
    required: false
  SUPABASE_AUTH_JWT_SECRET:
    description: "JWT secret for auth operations"
    required: false

# Outils MCP disponibles
tools:
  - execute_sql
  - list_tables
  - check_health
  - list_auth_users
  - create_auth_user
  - manage_extensions
  - generate_typescript_types
  - backup_database
  - import_schema
  - execute_psql
  - inspect_schema
  - apply_migration